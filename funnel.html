<!doctype html><html lang="nl"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Funnel — Trajecten (v5)</title><link rel="stylesheet" href="styles.css"/></head><body><div class="container">
<header class="headerbar"><div class="brand"><div class="dot"></div><strong>Club Portal</strong><span class="small">funnel v5</span></div><nav class="btns"><a class="ghost" href="index.html">← Dashboard</a><button class="ghost logout">Uitloggen</button></nav></header>
<section class="alerts hidden" id="alertsBox"><h4>⚠ Openstaande signalen</h4><div id="alertsRows"></div></section>
<section class="card"><div class="card-header" style="justify-content:space-between;"><h2>Funnel / Pipeline</h2><div style="display:flex;gap:8px;"><button id="addCardBtn">+ Nieuw traject</button><button id="exportFunnelBtn" class="ghost">Export JSON</button><button id="clearFunnelBtn" class="danger">Alles wissen</button></div></div>
<div class="board" id="board">
<div class="column" data-stage="intake"><h4>Intake</h4><div class="dropzone" data-stage="intake"></div></div>
<div class="column" data-stage="in_uitvoering"><h4>In uitvoering</h4><div class="dropzone" data-stage="in_uitvoering"></div></div>
<div class="column" data-stage="evaluatie"><h4>Evaluatie</h4><div class="dropzone" data-stage="evaluatie"></div></div>
<div class="column" data-stage="afgerond"><h4>Afgerond</h4><div class="dropzone" data-stage="afgerond"></div></div>
</div></section></div>

<!-- Overzicht & Filters -->
<div class="container">
  <section class="card">
    <div class="card-header" style="justify-content:space-between;">
      <h2>Overzicht & Filters</h2>
      <div style="display:flex; gap:8px;">
        <button id="exportCsvBtn" class="ghost">Export CSV</button>
      </div>
    </div>

    <div class="grid-2" style="margin-bottom:12px;">
      <label>Type traject
        <select id="fType">
          <option value="">Alle</option>
          <option>CKC</option>
          <option>Rabo Clubsupport</option>
          <option>Verenigingsmanager</option>
          <option>Verduurzaming</option>
        </select>
      </label>
      <label>Stage
        <select id="fStage">
          <option value="">Alle</option>
          <option value="intake">Intake</option>
          <option value="in_uitvoering">In uitvoering</option>
          <option value="evaluatie">Evaluatie</option>
          <option value="afgerond">Afgerond</option>
        </select>
      </label>
      <label>Club (uit database)
        <input id="fClubId" list="clubsList" placeholder="Kies club…"/><datalist id="clubsList"></datalist>
      </label>
      <label>Zoek clubnaam (bevat)
        <input id="fClubName" placeholder="bijv. Dynamo"/>
      </label>
      <label>Clubondersteuner
        <input id="fClubSupp" placeholder="naam bevat…" />
      </label>
      <label>Trajectbegeleider
        <input id="fCoach" placeholder="naam bevat…" />
      </label>
      <label>Start vanaf
        <input id="fStartFrom" type="date" />
      </label>
      <label>Start t/m
        <input id="fStartTo" type="date" />
      </label>
    </div>

    <div class="tiles" id="metricTiles"></div>

    <div class="table-wrap" style="margin-top:12px;">
      <table id="listTable">
        <thead>
          <tr>
            <th>Vereniging</th>
            <th>Type</th>
            <th>Stage</th>
            <th>Clubondersteuner</th>
            <th>Begeleider</th>
            <th>Start</th>
            <th>Verwacht einde</th>
            <th>Duur (dagen)</th>
            <th>Begroot (€)</th>
            <th>Financiering (type)</th>
            <th>Financiering %</th>
            <th>Financiering €</th>
            <th>Eigen %</th>
            <th>Eigen €</th>
            <th>Gedekt %</th>
            <th>Restant €</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>
</div>

<!-- Modal -->
<div class="modal" id="cardModal"><div class="panel"><h3 id="modalTitle">Traject</h3>
<form id="cardForm" class="grid-2"><input type="hidden" name="id"/>
<input type="hidden" name="clubId"/>
<label>Vereniging (uit database)
  <input name="vereniging" id="clubPicker" list="clubsList" placeholder="Zoek/Selecteer club…" required/>
</label>
<label>Type traject<select name="typeTraject" required>
  <option value="">Kies…</option><option>CKC</option><option>Rabo Clubsupport</option><option>Verenigingsmanager</option><option>Verduurzaming</option>
</select></label>
<label>Clubondersteuner<input name="clubondersteuner" required/></label>
<label>Trajectbegeleider<input name="trajectbegeleider" required/></label>
<label>Start traject<input name="startDate" type="date" required/></label>
<label>Verwacht einde<input name="endDateExpected" type="date" required/></label>

<label>Begroot (€)<input name="costBudget" id="costBudget" type="number" step="0.01" min="0" placeholder="0.00"/></label>
<div class="span-2"></div>

<label>Type financiering<select name="financingType" id="financingType">
  <option value="">Kies…</option>
  <option>Lokaal Sportakkoord</option>
  <option>Overige subsidie</option>
</select></label>
<label>Financiering %<input name="financingPct" id="financingPct" type="number" step="0.1" min="0" max="100" placeholder="0" /></label>
<label>Financiering €<input name="financingAmount" id="financingAmount" type="number" step="0.01" min="0" placeholder="0.00" readonly/></label>
<div></div>

<label>Eigen bijdrage %<input name="ownPct" id="ownPct" type="number" step="0.1" min="0" max="100" placeholder="0" required/></label>
<label>Eigen bijdrage €<input name="ownAmount" id="ownAmount" type="number" step="0.01" min="0" placeholder="0.00" readonly/></label>
<div class="span-2 small" id="coverageInfo">—</div>

<label>Stage<select name="stage" required>
  <option value="intake">Intake</option><option value="in_uitvoering">In uitvoering</option><option value="evaluatie">Evaluatie</option><option value="afgerond">Afgerond</option>
</select></label>
<label>Laatste update<input name="lastUpdate" type="date"/></label>

<label class="span-2">Notities<textarea name="notes" rows="4"></textarea></label>
<div class="span-2" style="display:flex;gap:8px;justify-content:flex-end;"><button type="button" class="secondary" id="cancelModalBtn">Annuleren</button><button type="submit" class="ok">Opslaan</button></div>
</form></div></div>

<script type="module" src="funnel.js"></script>
</body></html>
